var n=s=>{let t=s.getBoundingClientRect();return{x:t.left,y:t.top,w:t.width,h:t.height}};var a=class{constructor(t=500,i="data-el-ignore",e="data-el-animation-att",o="data-el-moved-att",r="data-el-old-pos"){this.removeAnimation=t=>{t.style.transition="",t.style.transform=""};this.saveElementPosition=(t,i)=>(t.setAttribute(this.oldPositionAttribute,JSON.stringify(i)),t);this.moveToSavedPosition=t=>{let i=n(t),e=JSON.parse(t.getAttribute(this.oldPositionAttribute));t.style.transform=`translate3d(${e.x-i.x}px, ${e.y-i.y}px, 0px)`};this.animate=(t,i=0,e=0,o)=>{if(t.setAttribute(this.isMovedAttribute,""),t.style.transition=`transform ${this.animationDuration}ms ease`,t.style.transform=`translate3d(${i}px, ${e}px, 0px)`,t.hasAttribute(this.animationAttribute)){let m=Number(t.getAttribute(this.animationAttribute));clearTimeout(m)}let r=setTimeout(()=>{this.removeAnimation(t),t.removeAttribute(this.oldPositionAttribute),t.removeAttribute(this.isMovedAttribute),t.removeAttribute(this.animationAttribute),o?.()},this.animationDuration);t.setAttribute(this.animationAttribute,String(r))};this.animateElementsMovement=(t,i)=>{t.forEach(e=>{this.saveElementPosition(e,n(e)),e.hasAttribute(this.ignoreAttribute)||(this.saveElementPosition(e,n(e)),this.removeAnimation(e))}),i(),t.forEach(e=>{e.setAttribute(this.isMovedAttribute,""),this.moveToSavedPosition(e),e.offsetHeight,this.animate(e)})};this.animationDuration=t,this.oldPositionAttribute=r,this.animationAttribute=e,this.isMovedAttribute=o,this.ignoreAttribute=i}isMoved(...t){let i=!1;return t.forEach(e=>{e.hasAttribute(this.isMovedAttribute)&&(i=!0)}),i}};export{a as ElementsAnimator};
