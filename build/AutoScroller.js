var o=class{constructor(e=100,l=50){this.isScrolledToEnd=(e,l,t)=>e==="x"&&l==="f"?t.scrollWidth-t.scrollLeft<=t.clientWidth+1:e==="x"&&l==="b"?t.scrollLeft===0:e==="y"&&l==="f"?t.scrollHeight-t.scrollTop<=t.clientHeight+1:e==="y"&&l==="b"?t.scrollTop===0:!1;this.scrollToPositionThreshold=l,this.scrollSpeed=e,this.startTime=null,this.scrollAnimationState=null,this.actualScrollAction=null}shouldEnableAutoScroller(e,l){let t=Math.max(document.documentElement.clientWidth||0,window.innerWidth||0),s=Math.max(document.documentElement.clientHeight||0,window.innerHeight||0),i=document.elementFromPoint(e,l);if(i){let n=i.getBoundingClientRect();e>t-this.scrollToPositionThreshold?this.getLastScrollableElementOnAxis("x","f",i,1):e-n.x>i.clientWidth-this.scrollToPositionThreshold?this.scrollElement("x","f",this.getFirstFullyVisibleElementOnAxis("x",i),2):e<this.scrollToPositionThreshold?this.getLastScrollableElementOnAxis("x","b",i,3):e-n.x<this.scrollToPositionThreshold?this.scrollElement("x","b",this.getFirstFullyVisibleElementOnAxis("x",i),4):l<this.scrollToPositionThreshold?this.getLastScrollableElementOnAxis("y","b",i,5):l-n.y<this.scrollToPositionThreshold?this.scrollElement("y","b",this.getFirstFullyVisibleElementOnAxis("y",i),6):l>s-this.scrollToPositionThreshold?this.getLastScrollableElementOnAxis("y","f",i,7):l-n.y>n.height-this.scrollToPositionThreshold?this.scrollElement("y","b",this.getFirstFullyVisibleElementOnAxis("y",i),8):this.stopScroller()}}getLastScrollableElementOnAxis(e,l,t,s){if(s!==this.actualScrollAction){this.stopScroller(),this.actualScrollAction=s;let i;for(;t;)this.isScrollable(e,t)&&!this.isScrolledToEnd(e,l,t)&&(i=t),t=t.parentElement;i&&this.startScroller(e,l,i)}}scrollElement(e,l,t,s){s!==this.actualScrollAction&&(this.stopScroller(),this.actualScrollAction=s,this.startScroller(e,l,t))}isScrollable(e,l){return getComputedStyle(l).overflow.includes("hidden")?!1:e==="x"?l.scrollWidth>l.clientWidth:l.scrollHeight>l.clientHeight}startScroller(e,l,t,s=0){this.scrollAnimationState===null&&(this.scrollAnimationState=requestAnimationFrame(i=>{this.startTime||(this.startTime=i);let n=i-this.startTime;this.startTime=i,s+=n/1e3*this.scrollSpeed,s>1&&(s=l==="f"?s:-s,e==="y"?t?.scrollBy({left:0,top:s,behavior:"instant"}):e==="x"&&t?.scrollBy({left:s,top:0,behavior:"instant"}),s=0),this.scrollAnimationState=null,this.startScroller(e,l,t,s)}))}isFullyVisibleOnAxis(e,l,t){return e==="x"?l.clientWidth<t.clientWidth:l.clientHeight<t.clientHeight}getFirstFullyVisibleElementOnAxis(e,l){let t=l.parentElement;for(;t;){if(this.isFullyVisibleOnAxis(e,l,t))return l;l=t,t=t.parentElement}return l}stopScroller(){this.scrollAnimationState&&cancelAnimationFrame(this.scrollAnimationState),this.startTime=null,this.scrollAnimationState=null,this.actualScrollAction=null}};export{o as default};
